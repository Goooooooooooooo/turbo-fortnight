
{% extends 'base.html' %}
{% load staticfiles %}
# 加载自定义过滤器
{% load extra_tags %}

{% block title %}
	新建文章
{% endblock title %}

{% block content %}
<!--<div class="card">-->
<!--		        <div class="card-body">-->
<!--		            <div class="row">-->
<!--		                <div class="col-md-12">-->
<!--		                    <h4>Create Article</h4>-->
<!--                            <p>-->
<!--                                Markdown 在线编辑器：-->
<!--                                <a href="https://stackedit.io/app#" target="_blank"> StackEdit </a> /-->
<!--                                <a href="https://dillinger.io/" target="_blank"> Dillinger </a> /-->
<!--                                <a href="https://daringfireball.net/projects/markdown/dingus" target="_blank"> Dingus </a>-->
<!--                            </p>-->
<!--		                    <hr>-->
<!--		                </div>-->

<!--		            </div>-->
<br><br>
<div class="container">
    <form method="post" action="." enctype="multipart/form-data">
        {% csrf_token %}
        <div class="row">
            <div class="col-4 border border-info">
                <div class="form-group">
                    <label class="">Title*</label>
                    <div class="">
                      {{ form.title | add_class:'form-control here' }}
                    </div>
                    <div>
                        {% if form.title.errors %}
                            <ol>
                            {% for error in form.title.errors %}
                                <li><strong>{{ error|escape }}</strong></li>
                            {% endfor %}
                            </ol>
                        {% endif %}
                    </div>
                </div>
                <div class="form-group">
                    <label class="">Category </label>
                    <div class="">
                        {{ form.category | add_class:'custom-select' }}
                    </div>
                    <div>
                        {{ form.category.errors }}
                    </div>
                </div>
                <div class="form-group row">
                    <label class="">Tags </label>
                    <div class="">
                      {{ form.tags | add_class:'form-control here' }}
                    </div>
                    <div>
                      {{ form.tags.errors }}
                    </div>
                </div>
                <div class="form-group">
                    <label class="col">Summary </label>
                    <div class="col">
                      {{ form.summary | add_class:'form-control here' }}
                    </div>
                    <div>
                      {{ form.summary.errors }}
                    </div>
                </div>
            </div>
            <div class="col-8">
                <div class="" style="width:100%;height:100%;">
                  {{ form.media }}
                  {{ form.body | add_class:'form-control here' }}
                </div>
                <div>
                    {{ form.body.errors }}
                </div>
            </div>
            <div class="form-group">
                <div class="offset-4 col-8">
                  <button name="submit" type="submit" class="btn btn-primary"> Save </button>
                </div>
            </div>
        </div>
    </form>
</div>

<script src="{% static 'ckeditor/ckeditor/plugins/prism/lib/prism/prism_patched.min.js' %}"></script>
<link rel="stylesheet" href="{% static 'prism/prism.css' %}">

{% endblock content %}

{% block script %}
<script>
    var mde = new SimpleMDE({
        element: document.querySelector('textarea'),
        autofocus:true,
        autosave: {
            enabled: true,
            uniqueId: "SimpleMDE",
            delay: 1000,
        },
    });
</script>
{% endblock script %}